require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([1],{57:function(t,e,o){"use strict";var n=a(o(2)),r=a(o(58));function a(t){return t&&t.__esModule?t:{default:t}}o(0).default;new n.default(r.default).$mount()},58:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(60),r=o.n(n),a=o(62),i=!1;var c=function(t){i||o(59)},s=o(1)(r.a,a.a,c,null,null);s.options.__file="..\\..\\..\\workspace\\uni-quickGo\\pages\\we-cropper\\we-cropper.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] we-cropper.vue: functional components are not supported with templates, they should use render functions."),e.default=s.exports},59:function(t,e){},60:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=o(61),a=(n=r)&&n.__esModule?n:{default:n};var i=o(0).default,c=i.getSystemInfoSync(),s=c.windowWidth,u=c.windowHeight-50;e.default={data:function(){return{filePath:"",cropperOpt:{id:"cropper",width:s,height:u,scale:2.5,zoom:8,cut:{x:(s-300)/2,y:(u-300)/2,width:300,height:300}}}},methods:{touchStart:function(t){this.wecropper.touchStart(t)},touchMove:function(t){this.wecropper.touchMove(t)},touchEnd:function(t){this.wecropper.touchEnd(t)},getCropperImage:function(){var t=this;this.wecropper.getCropperImage(function(e){e&&(t.filePath=e,console.log(avater))})},uploadTap:function(){var t=this;wx.chooseImage({count:1,sizeType:["compressed"],success:function(e){var o=e.tempFilePaths[0];t.wecropper.pushOrign(o)}})}},onLoad:function(t){console.log("src: "+t.src),t.src&&(this.cropperOpt.src=t.src,new a.default(this.cropperOpt).on("ready",function(t){console.log("wecropper is ready for work!")}).on("beforeImageLoad",function(t){console.log("before picture loaded, i can do something"),console.log("current canvas context:",t),i.showToast({title:"上传中",icon:"loading",duration:2e4})}).on("imageLoad",function(t){console.log("picture loaded"),console.log("current canvas context:",t),i.hideToast()}).on("beforeDraw",function(t,e){console.log("before canvas draw,i can do something"),console.log("current canvas context:",t)}).updateCanvas())}}},61:function(t,e,o){"use strict";(function(n){var r,a,i,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o(0).default;
/**
                                                                                                                                                                                                                                                                                                                        * we-cropper v1.2.0
                                                                                                                                                                                                                                                                                                                        * (c) 2018 dlhandsome
                                                                                                                                                                                                                                                                                                                        * @license MIT
                                                                                                                                                                                                                                                                                                                        */
i=function(){var t=void 0,e=["touchstarted","touchmoved","touchended"];function o(t){return"function"==typeof t}function r(t){for(var o=[],n=arguments.length-1;n-- >0;)o[n]=arguments[n+1];e.forEach(function(e,n){void 0!==o[n]&&(t[e]=o[n])})}var a={},i={id:{default:"cropper",get:function(){return a.id},set:function(t){"string"!=typeof t&&console.error("id："+t+" is invalid"),a.id=t}},width:{default:750,get:function(){return a.width},set:function(t){"number"!=typeof t&&console.error("width："+t+" is invalid"),a.width=t}},height:{default:750,get:function(){return a.height},set:function(t){"number"!=typeof t&&console.error("height："+t+" is invalid"),a.height=t}},scale:{default:2.5,get:function(){return a.scale},set:function(t){"number"!=typeof t&&console.error("scale："+t+" is invalid"),a.scale=t}},zoom:{default:5,get:function(){return a.zoom},set:function(t){"number"!=typeof t?console.error("zoom："+t+" is invalid"):(t<0||t>10)&&console.error("zoom should be ranged in 0 ~ 10"),a.zoom=t}},src:{default:"cropper",get:function(){return a.src},set:function(t){"string"!=typeof t&&console.error("id："+t+" is invalid"),a.src=t}},cut:{default:{},get:function(){return a.cut},set:function(t){"object"!==(void 0===t?"undefined":c(t))&&console.error("id："+t+" is invalid"),a.cut=t}},onReady:{default:null,get:function(){return a.ready},set:function(t){a.ready=t}},onBeforeImageLoad:{default:null,get:function(){return a.beforeImageLoad},set:function(t){a.beforeImageLoad=t}},onImageLoad:{default:null,get:function(){return a.imageLoad},set:function(t){a.imageLoad=t}},onBeforeDraw:{default:null,get:function(){return a.beforeDraw},set:function(t){a.beforeDraw=t}}};var s="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{};var u,d=(function(t,e){
/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */
!function(o){var n=e,r=t&&t.exports==n&&t,a="object"==(void 0===s?"undefined":c(s))&&s;a.global!==a&&a.window!==a||(o=a);var i=function(t){this.message=t};(i.prototype=new Error).name="InvalidCharacterError";var u=function(t){throw new i(t)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/[\t\n\f\r ]/g,l={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var e,o,n,r,a=t.length%3,i="",c=-1,s=t.length-a;++c<s;)e=t.charCodeAt(c)<<16,o=t.charCodeAt(++c)<<8,n=t.charCodeAt(++c),i+=d.charAt((r=e+o+n)>>18&63)+d.charAt(r>>12&63)+d.charAt(r>>6&63)+d.charAt(63&r);return 2==a?(e=t.charCodeAt(c)<<8,o=t.charCodeAt(++c),i+=d.charAt((r=e+o)>>10)+d.charAt(r>>4&63)+d.charAt(r<<2&63)+"="):1==a&&(r=t.charCodeAt(c),i+=d.charAt(r>>2)+d.charAt(r<<4&63)+"=="),i},decode:function(t){var e=(t=String(t).replace(h,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var o,n,r=0,a="",i=-1;++i<e;)n=d.indexOf(t.charAt(i)),o=r%4?64*o+n:n,r++%4&&(a+=String.fromCharCode(255&o>>(-2*r&6)));return a},version:"0.1.0"};if(n&&!n.nodeType)if(r)r.exports=l;else for(var f in l)l.hasOwnProperty(f)&&(n[f]=l[f]);else o.base64=l}(s)}(u={exports:{}},u.exports),u.exports);function h(t){var e="";if("string"==typeof t)e=t;else for(var o=0;o<t.length;o++)e+=String.fromCharCode(t[o]);return d.encode(e)}function l(t,e,n,r,a,i,c){void 0===c&&(c=function(){}),void 0===i&&(i="png"),i=function(t){return"image/"+(t=t.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]}(i),/bmp/.test(i)?function(t,e,o,n,r,a){wx.canvasGetImageData({canvasId:t,x:e,y:o,width:n,height:r,success:function(t){a(t)},fail:function(t){a(null),console.error("canvasGetImageData error: "+t)}})}(t,e,n,r,a,function(t){var e=function(t){var e=t.width,o=t.height,n=e*o*3,r=n+54,a=[66,77,255&r,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,54,0,0,0],i=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255,1,0,24,0,0,0,0,0,255&n,n>>8&255,n>>16&255,n>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=(4-3*e%4)%4,s=t.data,u="",d=e<<2,l=o,f=String.fromCharCode;do{for(var p=d*(l-1),v="",g=0;g<e;g++){var y=g<<2;v+=f(s[p+y+2])+f(s[p+y+1])+f(s[p+y])}for(var w=0;w<c;w++)v+=String.fromCharCode(0);u+=v}while(--l);return h(a.concat(i))+h(u)}(t);o(c)&&c(function(t,e){return"data:"+e+";base64,"+t}(e,"image/"+i))}):console.error("暂不支持生成'"+i+"'类型的base64图片")}var f={convertToImage:l,convertToBMP:function(t,e){void 0===t&&(t={});var o=t.canvasId,n=t.x,r=t.y,a=t.width,i=t.height;return void 0===e&&(e=function(){}),l(o,n,r,a,i,"bmp",e)}};var p=function(t,e,o,n,r){var a,i;return a=Math.round(r.x-n.x),i=Math.round(r.y-n.y),t+.001*o*(Math.round(Math.sqrt(a*a+i*i))-e)};var v={touchStart:function(t){var e=t.touches,o=e[0],n=e[1];r(this,!0,null,null),this.__oneTouchStart(o),t.touches.length>=2&&this.__twoTouchStart(o,n)},touchMove:function(t){var e=t.touches,o=e[0],n=e[1];r(this,null,!0),1===t.touches.length&&this.__oneTouchMove(o),t.touches.length>=2&&this.__twoTouchMove(o,n)},touchEnd:function(t){r(this,!1,!1,!0),this.__xtouchEnd()}};var g=function(t){var e,o,n={};return e=this,o=i,Object.defineProperties(e,o),Object.keys(i).forEach(function(t){n[t]=i[t].default}),Object.assign(this,n,t),this.prepare(),this.attachPage(),this.createCtx(),this.observer(),this.cutt(),this.methods(),this.init(),this.update(),this};return g.prototype.init=function(){var t=this.src;return this.version="1.2.0","function"==typeof this.onReady&&this.onReady(this.ctx,this),t&&this.pushOrign(t),r(this,!1,!1,!1),this.oldScale=1,this.newScale=1,this},Object.assign(g.prototype,v),g.prototype.prepare=function(){var e=this,o=(t||(t=wx.getSystemInfoSync()),t).windowWidth;e.attachPage=function(){var t=getCurrentPages();t[t.length-1].wecropper=e},e.createCtx=function(){var t=e.id;t?e.ctx=wx.createCanvasContext(t):console.error("constructor: create canvas context failed, 'id' must be valuable")},e.deviceRadio=o/750},g.prototype.observer=function(){var t=this,e=["ready","beforeImageLoad","beforeDraw","imageLoad"];t.on=function(o,n){var r;return e.indexOf(o)>-1?"function"==typeof n&&("ready"===o?n(t):t["on"+(r=o,r.charAt(0).toUpperCase()+r.slice(1))]=n):console.error("event: "+o+" is invalid"),t}},g.prototype.methods=function(){var t=this,e=t.id,n=t.deviceRadio,r=t.width,a=t.height,i=t.cut,c=i.x;void 0===c&&(c=0);var s=i.y;void 0===s&&(s=0);var u=i.width;void 0===u&&(u=r);var d=i.height;void 0===d&&(d=a),t.updateCanvas=function(){return t.croperTarget&&t.ctx.drawImage(t.croperTarget,t.imgLeft,t.imgTop,t.scaleWidth,t.scaleHeight),o(t.onBeforeDraw)&&t.onBeforeDraw(t.ctx,t),t.setBoundStyle(),t.ctx.draw(),t},t.pushOrign=function(e){return t.src=e,o(t.onBeforeImageLoad)&&t.onBeforeImageLoad(t.ctx,t),wx.getImageInfo({src:e,success:function(e){var n=e.width/e.height;t.croperTarget=e.path,n<u/d?(t.rectX=c,t.baseWidth=u,t.baseHeight=u/n,t.rectY=s-Math.abs((d-t.baseHeight)/2)):(t.rectY=s,t.baseWidth=d*n,t.baseHeight=d,t.rectX=c-Math.abs((u-t.baseWidth)/2)),t.imgLeft=t.rectX,t.imgTop=t.rectY,t.scaleWidth=t.baseWidth,t.scaleHeight=t.baseHeight,t.updateCanvas(),o(t.onImageLoad)&&t.onImageLoad(t.ctx,t)}}),t.update(),t},t.getCropperBase64=function(t){void 0===t&&(t=function(){}),f.convertToBMP({canvasId:e,x:c,y:s,width:u,height:d},t)},t.getCropperImage=function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];var i=toString.call(r[0]),h=r[r.length-1];switch(i){case"[object Object]":var l=r[0].quality;void 0===l&&(l=10),"number"!=typeof l?console.error("quality："+l+" is invalid"):(l<0||l>10)&&console.error("quality should be ranged in 0 ~ 10"),wx.canvasToTempFilePath({canvasId:e,x:c,y:s,width:u,height:d,destWidth:u*l/(10*n),destHeight:d*l/(10*n),success:function(e){o(h)&&h.call(t,e.tempFilePath)},fail:function(e){o(h)&&h.call(t,null)}});break;case"[object Function]":wx.canvasToTempFilePath({canvasId:e,x:c,y:s,width:u,height:d,destWidth:u/n,destHeight:d/n,success:function(e){o(h)&&h.call(t,e.tempFilePath)},fail:function(e){o(h)&&h.call(t,null)}})}return t}},g.prototype.cutt=function(){var t=this,e=t.width,o=t.height,n=t.cut,r=n.x;void 0===r&&(r=0);var a=n.y;void 0===a&&(a=0);var i=n.width;void 0===i&&(i=e);var c=n.height;void 0===c&&(c=o),t.outsideBound=function(e,o){t.imgLeft=e>=r?r:t.scaleWidth+e-r<=i?r+i-t.scaleWidth:e,t.imgTop=o>=a?a:t.scaleHeight+o-a<=c?a+c-t.scaleHeight:o},t.setBoundStyle=function(n){void 0===n&&(n={});var s=n.color;void 0===s&&(s="#04b00f");var u=n.mask;void 0===u&&(u="rgba(0, 0, 0, 0.3)");var d=n.lineWidth;void 0===d&&(d=1);var h=[{start:{x:r-d,y:a+10-d},step1:{x:r-d,y:a-d},step2:{x:r+10-d,y:a-d}},{start:{x:r-d,y:a+c-10+d},step1:{x:r-d,y:a+c+d},step2:{x:r+10-d,y:a+c+d}},{start:{x:r+i-10+d,y:a-d},step1:{x:r+i+d,y:a-d},step2:{x:r+i+d,y:a+10-d}},{start:{x:r+i+d,y:a+c-10+d},step1:{x:r+i+d,y:a+c+d},step2:{x:r+i-10+d,y:a+c+d}}];t.ctx.beginPath(),t.ctx.setFillStyle(u),t.ctx.fillRect(0,0,r,o),t.ctx.fillRect(r,0,i,a),t.ctx.fillRect(r,a+c,i,o-a-c),t.ctx.fillRect(r+i,0,e-r-i,o),t.ctx.fill(),h.forEach(function(e){t.ctx.beginPath(),t.ctx.setStrokeStyle(s),t.ctx.setLineWidth(d),t.ctx.moveTo(e.start.x,e.start.y),t.ctx.lineTo(e.step1.x,e.step1.y),t.ctx.lineTo(e.step2.x,e.step2.y),t.ctx.stroke()})}},g.prototype.update=function(){var t=this;t.src&&(t.__oneTouchStart=function(e){t.touchX0=Math.round(e.x),t.touchY0=Math.round(e.y)},t.__oneTouchMove=function(e){var o,n;if(t.touchended)return t.updateCanvas();o=Math.round(e.x-t.touchX0),n=Math.round(e.y-t.touchY0);var r=Math.round(t.rectX+o),a=Math.round(t.rectY+n);t.outsideBound(r,a),t.updateCanvas()},t.__twoTouchStart=function(e,o){var n,r,a;t.touchX1=Math.round(t.rectX+t.scaleWidth/2),t.touchY1=Math.round(t.rectY+t.scaleHeight/2),n=Math.round(o.x-e.x),r=Math.round(o.y-e.y),a=Math.round(Math.sqrt(n*n+r*r)),t.oldDistance=a},t.__twoTouchMove=function(e,o){var n=t.oldScale,r=t.oldDistance,a=t.scale,i=t.zoom;t.newScale=p(n,r,i,e,o),t.newScale<=1&&(t.newScale=1),t.newScale>=a&&(t.newScale=a),t.scaleWidth=Math.round(t.newScale*t.baseWidth),t.scaleHeight=Math.round(t.newScale*t.baseHeight);var c=Math.round(t.touchX1-t.scaleWidth/2),s=Math.round(t.touchY1-t.scaleHeight/2);t.outsideBound(c,s),t.updateCanvas()},t.__xtouchEnd=function(){t.oldScale=t.newScale,t.rectX=t.imgLeft,t.rectY=t.imgTop})},g},"object"===c(e)&&void 0!==t?t.exports=i():void 0===(a="function"==typeof(r=i)?r.call(e,o,e,t):r)||(t.exports=a)}).call(e,o(3))},62:function(t,e,o){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"page"},[e("view",{staticClass:"cropper-wrapper"},[e("canvas",{staticClass:"cropper",style:{width:this.cropperOpt.width+"px",height:this.cropperOpt.height+"px"},attrs:{"disable-scroll":"true",bindtouchstart:"touchStart",bindtouchmove:"touchMove",bindtouchend:"touchEnd","canvas-id":this.cropperOpt.id}})])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};e.a=r}},[57]);
//# sourceMappingURL=../../.sourcemap/pages/we-cropper/we-cropper.js.map